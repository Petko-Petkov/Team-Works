<div class="col-lg-12" ng-controller="PersonalAdsController">
    <div class="well bs-component">
        <form class="form-horizontal">
            <fieldset>
                <legend class="text-center">Publish new advertisement</legend>
                <div class="row">
                    <div class="col-lg-8">
                        <div class="form-group">
                            <label for="inputTitle" class="col-lg-3 control-label">Title</label>

                            <div class="col-lg-9">
                                <input type="text" ng-model="adData.title" class="form-control" id="inputTitle"
                                       placeholder="Title">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="content" class="col-lg-3 control-label">Content</label>

                            <div class="col-lg-9">
                                <textarea ng-model="adData.text" class="form-control" rows="6" id="content"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="inputImage" class="col-lg-3 control-label">Image</label>

                            <div class="input-group col-lg-9">
                            <span class="input-group-btn">
                                <span class="btn btn-primary btn-file" id="inputImage">
                                    Browse&hellip; <input type="file" multiple onchange="angular.element(this).scope().fileSelected(this)">
                                </span>
                            </span>
                                <input type="text" class="form-control text-field" readonly>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="inputCategory" class="col-lg-3 control-label">Category</label>
                            <div class="col-lg-9">
                                <select class="form-control" id="inputCategory" ng-model="adData.categoryId" ng-options="category.id as category.name for category in categories">
                                    <option value="">--Choose category--</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="inputTown" class="col-lg-3 control-label">Town</label>

                            <div class="col-lg-9">
                                <select class="form-control" id="inputTown" ng-model="adData.townId" ng-options="town.id as town.name for town in towns">
                                    <option value="">--Choose town--</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-lg-10 col-lg-offset-2">
                                <button class="btn btn-default">Cancel</button>
                                <button type="button" class="btn btn-primary" ng-click="publishNewAd(adData)">Publish</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 image-box">
                        <img src="{{url}}" alt="Image preview"/>
                    </div>

                </div>
            </fieldset>
        </form>
        <div id="source-button" class="btn btn-primary btn-xs" style="display: none;">&lt; &gt;</div>

    </div>
    <script>
        $(document).on('change', '.btn-file :file', function () {
            var input = $(this),
                    numFiles = input.get(0).files ? input.get(0).files.length : 1,
                    label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
            input.trigger('fileselect', [numFiles, label]);
        });

        $(document).ready(function () {
            $('.btn-file :file').on('fileselect', function (event, numFiles, label) {

                var input = $(this).parents('.input-group').find(':text'),
                        log = numFiles > 1 ? numFiles + ' files selected' : label;

                if (input.length) {
                    input.val(log);
                } else {
                    if (log) alert(log);
                }

            });
        });
    </script>
    </div>